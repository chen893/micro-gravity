# ç³»ç»Ÿé‡æ„è®¾è®¡æ–¹æ¡ˆ

**åŸºäºç¦æ ¼è¡Œä¸ºæ¨¡å‹çš„ä¹ æƒ¯å…»æˆç³»ç»Ÿé‡æ„**

---

| æ–‡æ¡£ä¿¡æ¯ | |
|---------|---|
| åˆ›å»ºæ—¥æœŸ | 2025-12-08 |
| ç‰ˆæœ¬ | v3.0 |
| ç›®çš„ | ç®€åŒ–ç³»ç»Ÿæ¶æ„ï¼Œå®Œæ•´å®ç°ç¦æ ¼æ¨¡å‹é—­ç¯ |

---

## ä¸€ã€æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 1.1 ç®€åŒ–åŸåˆ™

```
1. é»„é‡‘è¡Œä¸º â‰ˆ å¾®ä¹ æƒ¯ï¼ˆä¸éœ€è¦é¢å¤–çš„ Behavior å®ä½“ï¼‰
2. æ„¿æœ› â†’ ä¹ æƒ¯ æ˜¯ 1:N å…³ç³»
3. ä¹ æƒ¯ä¹‹é—´å¯ä»¥æœ‰çˆ¶å­å…³ç³»ï¼ˆç¹æ®–ï¼‰
4. é˜¶æ®µç”¨ JSON å­˜å‚¨ï¼ˆä¸éœ€è¦ç‹¬ç«‹æ¨¡å‹ï¼‰
```

### 1.2 ç¦æ ¼æ¨¡å‹æ ¸å¿ƒå…¬å¼

```
B = MAP
è¡Œä¸º(Behavior) = åŠ¨æœº(Motivation) + èƒ½åŠ›(Ability) + æç¤º(Prompt)

abc é…æ–¹ï¼š
a = Anchorï¼ˆé”šç‚¹æ—¶åˆ»ï¼‰    â†’ åœ¨æˆ‘ã€xxxã€‘ä¹‹å
b = Behaviorï¼ˆå¾®è¡Œä¸ºï¼‰    â†’ æˆ‘ä¼šã€xxxã€‘
c = Celebrationï¼ˆåº†ç¥ï¼‰   â†’ ä¸ºäº†è®©å¤§è„‘è®°ä½ï¼Œæˆ‘è¦ã€xxxã€‘
```

### 1.3 å®Œæ•´æµç¨‹

```
1. æ˜ç¡®æ„¿æœ› â†’ ç”¨æˆ·è¾“å…¥æƒ³è¦è¾¾æˆçš„ç›®æ ‡
2. è¡Œä¸ºæ¢ç´¢ â†’ AI ç”Ÿæˆè¡Œä¸ºé›†ç¾¤ï¼ˆé­”æ³•æ£’ï¼‰
3. ç„¦ç‚¹åœ°å›¾ â†’ AI è¯„ä¼°ï¼Œæ‰¾å‡ºé»„é‡‘è¡Œä¸º
4. é…æ–¹è®¾è®¡ â†’ é”šç‚¹ + å¾®ä¹ æƒ¯ + åº†ç¥
5. æ¼”ç»ƒ â†’ 7-10 æ¬¡æ¨¡æ‹Ÿ
6. æ‰§è¡Œ â†’ æ¯æ—¥æ‰“å¡ + åº†ç¥
7. ç”Ÿé•¿ â†’ ä¹ æƒ¯é€æ¸å˜å¤§
8. ç¹æ®– â†’ è¡ç”Ÿç›¸å…³ä¹ æƒ¯
9. æ„¿æœ›è¾¾æˆ â†’ æ ‡è®°å®Œæˆ
```

---

## äºŒã€æ•°æ®åº“ Schema è®¾è®¡

### 2.1 æšä¸¾å®šä¹‰

```prisma
// ============ æšä¸¾å®šä¹‰ ============

enum HabitType {
  BUILD // å…»æˆå‹
  BREAK // æˆ’é™¤å‹
}

enum HabitStatus {
  ACTIVE     // è¿›è¡Œä¸­
  PAUSED     // æš‚åœ
  GRADUATED  // å·²æ¯•ä¸šï¼ˆè‡ªåŠ¨åŒ–ï¼‰
  ARCHIVED   // å·²å½’æ¡£
}

enum AspirationStatus {
  EXPLORING  // æ¢ç´¢ä¸­ï¼ˆè¿˜åœ¨é€‰è¡Œä¸ºï¼‰
  ACTIVE     // è¿›è¡Œä¸­ï¼ˆå·²æœ‰ä¹ æƒ¯ï¼‰
  ACHIEVED   // å·²å®ç°
  ABANDONED  // å·²æ”¾å¼ƒ
}

enum CompletionLevel {
  MINIMUM   // æœ€ä½æ ‡å‡†
  STANDARD  // å½“å‰é˜¶æ®µæ ‡å‡†
  EXCEEDED  // è¶…é¢å®Œæˆ
}

enum CelebrationCategory {
  VERBAL   // è¯­è¨€ç±»
  PHYSICAL // åŠ¨ä½œç±»
  MENTAL   // æƒ³è±¡ç±»
  SENSORY  // æ„Ÿå®˜ç±»
}
```

### 2.2 æ ¸å¿ƒä¸šåŠ¡æ¨¡å‹

```prisma
// ============ æ„¿æœ›æ¨¡å‹ ============

model Aspiration {
  id          String            @id @default(cuid())
  userId      String
  user        User              @relation(fields: [userId], references: [id], onDelete: Cascade)

  // åŸºæœ¬ä¿¡æ¯
  description String            // åŸå§‹æ„¿æœ›ï¼š"æˆ‘æƒ³å˜å¾—æ›´å¥åº·"
  clarified   String?           // æ˜ç¡®åçš„æ„¿æœ›ï¼š"ç²¾åŠ›å……æ²›åœ°åº¦è¿‡æ¯ä¸€å¤©"
  category    String?           // åˆ†ç±»ï¼šå¥åº·/å­¦ä¹ /å·¥ä½œ/å…³ç³»

  // è¡Œä¸ºæ¢ç´¢æ•°æ®ï¼ˆJSONï¼Œä¸éœ€è¦ç‹¬ç«‹æ¨¡å‹ï¼‰
  // { behaviors: [...], focusMap: {...}, goldenBehavior: {...} }
  explorationData Json?

  // çŠ¶æ€è¿½è¸ª
  status      AspirationStatus  @default(EXPLORING)
  progress    Int               @default(0)  // 0-100 å®Œæˆåº¦
  achievedAt  DateTime?

  // å…³è”
  habits      Habit[]

  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  @@index([userId])
  @@index([status])
}

// ============ ä¹ æƒ¯æ¨¡å‹ ============

model Habit {
  id          String       @id @default(cuid())
  userId      String
  user        User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  // æ¥æº
  aspirationId String?
  aspiration   Aspiration?  @relation(fields: [aspirationId], references: [id], onDelete: SetNull)

  // ç¹æ®–å…³ç³»
  parentHabitId String?
  parentHabit   Habit?       @relation("HabitFamily", fields: [parentHabitId], references: [id], onDelete: SetNull)
  childHabits   Habit[]      @relation("HabitFamily")

  // åŸºæœ¬ä¿¡æ¯
  type        HabitType
  name        String        // ä¹ æƒ¯åç§°
  description String?       // æè¿°
  category    String?       // åˆ†ç±»

  // ====== å¾®ä¹ æƒ¯é…æ–¹ï¼ˆABCï¼‰======
  anchor      String        // A: é”šç‚¹ "ä¸Šå®Œå•æ‰€å"
  behavior    String        // B: å¾®è¡Œä¸º "åš2ä¸ªä¿¯å§æ’‘"
  celebration String?       // C: åº†ç¥æ–¹å¼ "æ¡æ‹³è¯´å¤ªæ£’äº†"

  // é…æ–¹æ¼”ç»ƒ
  rehearsalCount Int        @default(0)
  rehearsedAt    DateTime?

  // ====== é˜¶æ®µç³»ç»Ÿ ======
  // phases: [{ level, name, target, minimum, requiredDays }]
  phases         Json?
  currentPhase   Int        @default(1)

  // ====== çŠ¶æ€ ======
  status         HabitStatus @default(ACTIVE)
  graduatedAt    DateTime?   // æ¯•ä¸šæ—¶é—´

  // ç»Ÿè®¡ç¼“å­˜ï¼ˆå®šæœŸæ›´æ–°ï¼‰
  currentStreak  Int         @default(0)
  longestStreak  Int         @default(0)
  totalCheckins  Int         @default(0)

  // å…³è”
  logs           HabitLog[]

  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt

  @@index([userId])
  @@index([aspirationId])
  @@index([parentHabitId])
  @@index([status])
}

// ============ æ‰“å¡è®°å½•æ¨¡å‹ ============

model HabitLog {
  id          String          @id @default(cuid())
  habitId     String
  habit       Habit           @relation(fields: [habitId], references: [id], onDelete: Cascade)
  userId      String
  user        User            @relation(fields: [userId], references: [id], onDelete: Cascade)

  // æ‰“å¡ä¿¡æ¯
  loggedAt    DateTime        @db.Date
  completed   Boolean         @default(true)

  // å¼¹æ€§æ‰“å¡
  completionLevel CompletionLevel @default(MINIMUM)
  actualBehavior  String?     // å®é™…åšäº†ä»€ä¹ˆ

  // è¿›é˜¶ä¿¡å·
  wantedMore  Boolean         @default(false) // æƒ³åšæ›´å¤š
  feltEasy    Boolean         @default(false) // è§‰å¾—è½»æ¾

  // åº†ç¥
  celebrationMethodId String?
  celebrationMethod   CelebrationMethod? @relation(fields: [celebrationMethodId], references: [id])
  shineScore  Int?            // å‘å…‰æ„Ÿ 1-5

  // æƒ…ç»ªï¼ˆå¯é€‰ï¼‰
  moodBefore  Int?            // 1-5
  moodAfter   Int?            // 1-5
  note        String?

  createdAt   DateTime        @default(now())

  @@unique([habitId, loggedAt])
  @@index([habitId])
  @@index([userId])
  @@index([loggedAt])
}
```

### 2.3 æ”¯æŒæ¨¡å‹

```prisma
// ============ åº†ç¥æ–¹å¼ ============

model CelebrationMethod {
  id        String              @id @default(cuid())
  category  CelebrationCategory
  content   String              // "æ¡æ‹³è¯´å¤ªæ£’äº†"
  emoji     String?             // ğŸ‰
  isBuiltIn Boolean             @default(true)

  logs      HabitLog[]
  favorites UserCelebration[]

  @@index([category])
}

// ============ ç”¨æˆ·æ”¶è—çš„åº†ç¥æ–¹å¼ ============

model UserCelebration {
  id                  String            @id @default(cuid())
  userId              String
  user                User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  celebrationMethodId String
  celebrationMethod   CelebrationMethod @relation(fields: [celebrationMethodId], references: [id], onDelete: Cascade)
  isDefault           Boolean           @default(false)

  @@unique([userId, celebrationMethodId])
  @@index([userId])
}

// ============ æ—¥ç¨‹æ¸…å•ï¼ˆé”šç‚¹æ¥æºï¼‰============

model DailyRoutine {
  id         String   @id @default(cuid())
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  // æ´»åŠ¨åˆ—è¡¨ [{ name, time, frequency, location }]
  activities Json

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([userId])
  @@index([userId])
}

// ============ ç”¨æˆ·æ¨¡å‹ï¼ˆç®€åŒ–ï¼‰============

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?

  // åå¥½è®¾ç½®
  preferences   Json?     // { soundEnabled, theme, ... }

  // å…³è”
  accounts      Account[]
  sessions      Session[]
  aspirations   Aspiration[]
  habits        Habit[]
  habitLogs     HabitLog[]
  routines      DailyRoutine?
  celebrations  UserCelebration[]

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}
```

### 2.4 NextAuth æ¨¡å‹ï¼ˆä¿æŒä¸å˜ï¼‰

```prisma
model Account {
  id                       String  @id @default(cuid())
  userId                   String
  type                     String
  provider                 String
  providerAccountId        String
  refresh_token            String?
  access_token             String?
  expires_at               Int?
  token_type               String?
  scope                    String?
  id_token                 String?
  session_state            String?
  user                     User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  refresh_token_expires_in Int?

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}
```

---

## ä¸‰ã€æ•°æ®ç»“æ„ç¤ºä¾‹

### 3.1 Aspiration.explorationData

```typescript
interface ExplorationData {
  // è¡Œä¸ºé›†ç¾¤ï¼ˆé­”æ³•æ£’æ¢ç´¢ç»“æœï¼‰
  behaviors: Array<{
    name: string;
    description: string;
  }>;

  // ç„¦ç‚¹åœ°å›¾è¯„ä¼°ç»“æœ
  focusMap: Array<{
    name: string;
    impactScore: number;      // 1-10
    feasibilityScore: number; // 1-10
    quadrant: 'GOLDEN' | 'HIGH_IMPACT' | 'EASY_WIN' | 'AVOID';
    recommendation: string;
  }>;

  // æ¨èçš„é»„é‡‘è¡Œä¸º
  goldenBehavior: {
    name: string;
    microVersion: string;
    reason: string;
  };
}

// ç¤ºä¾‹
{
  behaviors: [
    { name: "æ¯å¤©è¿åŠ¨", description: "è¿›è¡Œèº«ä½“é”»ç‚¼" },
    { name: "å¤šå–æ°´", description: "ä¿æŒæ°´åˆ†æ‘„å…¥" },
    { name: "æ—©ç¡æ—©èµ·", description: "è§„å¾‹ä½œæ¯" },
    { name: "å‡å°‘åƒåœ¾é£Ÿå“", description: "å¥åº·é¥®é£Ÿ" }
  ],

  focusMap: [
    {
      name: "æ¯å¤©è¿åŠ¨",
      impactScore: 9,
      feasibilityScore: 7,
      quadrant: "GOLDEN",
      recommendation: "é«˜å½±å“ä¸”å®¹æ˜“åšæŒ"
    },
    {
      name: "æ—©ç¡æ—©èµ·",
      impactScore: 8,
      feasibilityScore: 4,
      quadrant: "HIGH_IMPACT",
      recommendation: "å½±å“å¤§ä½†éœ€è¦è°ƒæ•´ç”Ÿæ´»æ–¹å¼"
    }
  ],

  goldenBehavior: {
    name: "æ¯å¤©è¿åŠ¨",
    microVersion: "åš2ä¸ªä¿¯å§æ’‘",
    reason: "é«˜å½±å“ä¸”å®¹æ˜“åšæŒï¼Œä»æœ€å°åŠ¨ä½œå¼€å§‹"
  }
}
```

### 3.2 Habit.phases

```typescript
interface HabitPhase {
  level: number;
  name: string;
  target: string;     // ç›®æ ‡è¡Œä¸º
  minimum: string;    // æœ€ä½æ ‡å‡†
  requiredDays: number;
}

// ç¤ºä¾‹
[
  {
    level: 1,
    name: "èµ·æ­¥é˜¶æ®µ",
    target: "åš2ä¸ªä¿¯å§æ’‘",
    minimum: "åš1ä¸ªä¿¯å§æ’‘",
    requiredDays: 7
  },
  {
    level: 2,
    name: "æˆé•¿é˜¶æ®µ",
    target: "åš5ä¸ªä¿¯å§æ’‘",
    minimum: "åš2ä¸ªä¿¯å§æ’‘",
    requiredDays: 14
  },
  {
    level: 3,
    name: "ç¨³å®šé˜¶æ®µ",
    target: "åš10ä¸ªä¿¯å§æ’‘",
    minimum: "åš5ä¸ªä¿¯å§æ’‘",
    requiredDays: 21
  }
]
```

---

## å››ã€å‰ç«¯é¡µé¢ç»“æ„

### 4.1 ç›®å½•ç»“æ„

```
src/app/(app)/
â”œâ”€â”€ dashboard/              # ä»ªè¡¨ç›˜ï¼ˆé¦–é¡µï¼‰
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ aspirations/            # æ„¿æœ›ç®¡ç†
â”‚   â”œâ”€â”€ page.tsx           # æ„¿æœ›åˆ—è¡¨
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx       # æ„¿æœ›è¯¦æƒ…
â”œâ”€â”€ habits/                 # ä¹ æƒ¯ç®¡ç†
â”‚   â”œâ”€â”€ page.tsx           # ä¹ æƒ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â””â”€â”€ page.tsx       # åˆ›å»ºä¹ æƒ¯å‘å¯¼
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx       # ä¹ æƒ¯è¯¦æƒ…
â”œâ”€â”€ analytics/              # æ•°æ®åˆ†æ
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ settings/               # è®¾ç½®
    â””â”€â”€ page.tsx
```

### 4.2 ç»„ä»¶ç»“æ„

```
src/components/
â”œâ”€â”€ aspiration/
â”‚   â”œâ”€â”€ aspiration-card.tsx
â”‚   â”œâ”€â”€ aspiration-progress.tsx
â”‚   â””â”€â”€ exploration-wizard.tsx
â”œâ”€â”€ habit/
â”‚   â”œâ”€â”€ habit-card.tsx
â”‚   â”œâ”€â”€ habit-creation-wizard/
â”‚   â”‚   â”œâ”€â”€ step-aspiration.tsx
â”‚   â”‚   â”œâ”€â”€ step-exploration.tsx
â”‚   â”‚   â”œâ”€â”€ step-focus-map.tsx
â”‚   â”‚   â”œâ”€â”€ step-recipe.tsx
â”‚   â”‚   â”œâ”€â”€ step-rehearsal.tsx
â”‚   â”‚   â””â”€â”€ step-complete.tsx
â”‚   â”œâ”€â”€ checkin-dialog.tsx
â”‚   â”œâ”€â”€ celebration-modal.tsx
â”‚   â”œâ”€â”€ phase-indicator.tsx
â”‚   â””â”€â”€ advance-prompt.tsx
â”œâ”€â”€ celebration/
â”‚   â”œâ”€â”€ celebration-picker.tsx
â”‚   â””â”€â”€ shine-rating.tsx
â””â”€â”€ ui/
    â””â”€â”€ ... (shadcn ç»„ä»¶)
```

---

## äº”ã€äº¤äº’æµç¨‹è®¾è®¡

### 5.1 åˆ›å»ºä¹ æƒ¯ï¼ˆå®Œæ•´ç¦æ ¼æ¨¡å‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /habits/new - åˆ›å»ºä¹ æƒ¯å‘å¯¼                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 1.æ„¿æœ›   â”‚ â†’ â”‚ 2.æ¢ç´¢   â”‚ â†’ â”‚ 3.é€‰æ‹©   â”‚ â†’ â”‚ 4.é…æ–¹   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚              â”‚              â”‚              â”‚            â”‚
â”‚       â†“              â†“              â†“              â†“            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ 5.æ¼”ç»ƒ   â”‚ â†’ â”‚ 6.å®Œæˆ   â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 1: æ„¿æœ›é€‰æ‹©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ æƒ³å®ç°ä»€ä¹ˆæ„¿æœ›ï¼Ÿ                        â”‚
â”‚                                          â”‚
â”‚  â—‹ é€‰æ‹©å·²æœ‰æ„¿æœ›                           â”‚
â”‚    â€¢ å˜å¾—æ›´å¥åº·                          â”‚
â”‚    â€¢ æå‡å·¥ä½œæ•ˆç‡                        â”‚
â”‚                                          â”‚
â”‚  â—‹ åˆ›å»ºæ–°æ„¿æœ›                            â”‚
â”‚    [________________] è¾“å…¥ä½ çš„æ„¿æœ›        â”‚
â”‚                                          â”‚
â”‚                          [ä¸‹ä¸€æ­¥ â†’]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 2: è¡Œä¸ºæ¢ç´¢ï¼ˆé­”æ³•æ£’ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª„ æŒ¥èˆé­”æ³•æ£’ï¼Œæ¢ç´¢å¯èƒ½çš„è¡Œä¸º             â”‚
â”‚                                          â”‚
â”‚  æ„¿æœ›ï¼šå˜å¾—æ›´å¥åº·                         â”‚
â”‚                                          â”‚
â”‚  [æ­£åœ¨ç”Ÿæˆè¡Œä¸ºé€‰é¡¹...]                    â”‚
â”‚                                          â”‚
â”‚  å·²æ‰¾åˆ° 12 ä¸ªå¯èƒ½çš„è¡Œä¸ºï¼š                 â”‚
â”‚  â˜ æ¯å¤©è¿åŠ¨                              â”‚
â”‚  â˜ å¤šå–æ°´                                â”‚
â”‚  â˜ æ—©ç¡æ—©èµ·                              â”‚
â”‚  â˜ å‡å°‘åƒåœ¾é£Ÿå“                          â”‚
â”‚  ...                                     â”‚
â”‚                                          â”‚
â”‚  [â† è¿”å›]              [ç”Ÿæˆç„¦ç‚¹åœ°å›¾ â†’]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 3: ç„¦ç‚¹åœ°å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ç„¦ç‚¹åœ°å›¾                              â”‚
â”‚                                          â”‚
â”‚     é«˜å½±å“                                â”‚
â”‚        â”‚  â­æ¯å¤©è¿åŠ¨   â—‹å‡å°‘ç†¬å¤œ          â”‚
â”‚        â”‚               (é«˜å½±å“ä½†éš¾)       â”‚
â”‚        â”‚                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å®¹æ˜“åš        â”‚
â”‚        â”‚                                 â”‚
â”‚        â”‚  â—‹æ•´ç†æˆ¿é—´     â—‹å¤æ‚çš„...       â”‚
â”‚        â”‚  (ç®€å•å°èƒœ)                     â”‚
â”‚                                          â”‚
â”‚  â­ æ¨èé»„é‡‘è¡Œä¸ºï¼šæ¯å¤©è¿åŠ¨                â”‚
â”‚     å¾®ä¹ æƒ¯ç‰ˆæœ¬ï¼šåš2ä¸ªä¿¯å§æ’‘               â”‚
â”‚                                          â”‚
â”‚  [â† è¿”å›]              [ä½¿ç”¨æ­¤è¡Œä¸º â†’]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 4: é…æ–¹è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ è®¾è®¡ä½ çš„å¾®ä¹ æƒ¯é…æ–¹                    â”‚
â”‚                                          â”‚
â”‚  åœ¨æˆ‘ [é€‰æ‹©é”šç‚¹ â–¼]_________ ä¹‹å          â”‚
â”‚       â€¢ ä¸Šå®Œå•æ‰€                         â”‚
â”‚       â€¢ å–å®Œæ—©ä¸Šç¬¬ä¸€æ¯æ°´                  â”‚
â”‚       â€¢ ååˆ°åŠå…¬æ¡Œå‰                      â”‚
â”‚       + è‡ªå®šä¹‰é”šç‚¹                        â”‚
â”‚                                          â”‚
â”‚  æˆ‘ä¼š [åš2ä¸ªä¿¯å§æ’‘]________________       â”‚
â”‚                                          â”‚
â”‚  ä¸ºäº†è®©å¤§è„‘è®°ä½ï¼Œæˆ‘è¦ [é€‰æ‹©åº†ç¥æ–¹å¼ â–¼]    â”‚
â”‚       ğŸ‰ æ¡æ‹³è¯´"å¤ªæ£’äº†"                  â”‚
â”‚       ğŸ’ª ç»™è‡ªå·±ç‚¹èµ                       â”‚
â”‚       ğŸ˜Š å¾®ç¬‘                            â”‚
â”‚                                          â”‚
â”‚  [â† è¿”å›]              [å¼€å§‹æ¼”ç»ƒ â†’]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 5: æ¼”ç»ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ é…æ–¹æ¼”ç»ƒ (3/7)                        â”‚
â”‚                                          â”‚
â”‚  ç°åœ¨ï¼Œè¯·é—­ä¸Šçœ¼ç›æƒ³è±¡ï¼š                    â”‚
â”‚                                          â”‚
â”‚  "åœ¨æˆ‘ã€ä¸Šå®Œå•æ‰€ã€‘ä¹‹åï¼Œ                  â”‚
â”‚   æˆ‘ä¼šã€åš2ä¸ªä¿¯å§æ’‘ã€‘ï¼Œ                   â”‚
â”‚   ç„¶åã€æ¡æ‹³è¯´å¤ªæ£’äº†ã€‘"                   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                     â”‚ â”‚
â”‚  â”‚         ğŸ§  æƒ³è±¡è¿™ä¸ªåœºæ™¯              â”‚ â”‚
â”‚  â”‚                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  [å®Œæˆä¸€æ¬¡æ¼”ç»ƒ âœ“]                         â”‚
â”‚                                          â”‚
â”‚  è¿›åº¦ï¼šâ—â—â—â—‹â—‹â—‹â—‹                           â”‚
â”‚                                          â”‚
â”‚  [â† è¿”å›]              [è·³è¿‡æ¼”ç»ƒ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 6: å®Œæˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‰ ä¹ æƒ¯åˆ›å»ºæˆåŠŸï¼                        â”‚
â”‚                                          â”‚
â”‚  ä½ çš„å¾®ä¹ æƒ¯é…æ–¹ï¼š                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  åœ¨æˆ‘ã€ä¸Šå®Œå•æ‰€ã€‘ä¹‹åï¼Œ              â”‚ â”‚
â”‚  â”‚  æˆ‘ä¼šã€åš2ä¸ªä¿¯å§æ’‘ã€‘ï¼Œ               â”‚ â”‚
â”‚  â”‚  ç„¶åã€æ¡æ‹³è¯´å¤ªæ£’äº†ã€‘                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  å…³è”æ„¿æœ›ï¼šå˜å¾—æ›´å¥åº·                     â”‚
â”‚                                          â”‚
â”‚  æç¤ºï¼šè®°ä½ï¼Œé‡è¦çš„ä¸æ˜¯åšå¤šå°‘ï¼Œ           â”‚
â”‚  è€Œæ˜¯è®©å¤§è„‘è®°ä½è¿™ä¸ªè¡Œä¸ºï¼                 â”‚
â”‚                                          â”‚
â”‚  [æŸ¥çœ‹ä¹ æƒ¯]        [è¿”å›é¦–é¡µ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ¯æ—¥æ‰“å¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /habits/[id] - ä¹ æƒ¯è¯¦æƒ…                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  åš2ä¸ªä¿¯å§æ’‘                    é˜¶æ®µ 1/3  â”‚
â”‚  ğŸ”¥ è¿ç»­ 7 å¤©                            â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ä»Šæ—¥é…æ–¹                           â”‚ â”‚
â”‚  â”‚                                     â”‚ â”‚
â”‚  â”‚  åœ¨æˆ‘ã€ä¸Šå®Œå•æ‰€ã€‘ä¹‹åï¼Œ             â”‚ â”‚
â”‚  â”‚  æˆ‘ä¼šã€åš2ä¸ªä¿¯å§æ’‘ã€‘               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  ä»Šå¤©å®Œæˆäº†å—ï¼Ÿ                          â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æœ€ä½æ ‡å‡† â”‚ â”‚ æ ‡å‡†å®Œæˆ â”‚ â”‚ è¶…é¢å®Œæˆ â”‚   â”‚
â”‚  â”‚ 1ä¸ª     â”‚ â”‚ 2ä¸ª     â”‚ â”‚ 5ä¸ª+    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  [æ‰“å¡ âœ“]                                â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 åº†ç¥å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚              ğŸ‰ å¤ªæ£’äº†ï¼                  â”‚
â”‚                                          â”‚
â”‚         ä½ å®Œæˆäº†ä»Šå¤©çš„ä¹ æƒ¯               â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                     â”‚ â”‚
â”‚  â”‚    ç°åœ¨ï¼Œæ¡æ‹³è¯´"å¤ªæ£’äº†"ï¼            â”‚ â”‚
â”‚  â”‚                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  å‘å…‰æ„Ÿå¦‚ä½•ï¼Ÿ                            â”‚
â”‚  â­ â­ â­ â­ â­                           â”‚
â”‚                                          â”‚
â”‚  æƒ³åšæ›´å¤šå—ï¼Ÿ  [æ˜¯] [å¦]                 â”‚
â”‚  è§‰å¾—è½»æ¾å—ï¼Ÿ  [æ˜¯] [å¦]                 â”‚
â”‚                                          â”‚
â”‚                          [å®Œæˆ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 ä¹ æƒ¯è¿›é˜¶æç¤º

```
å½“ç³»ç»Ÿæ£€æµ‹åˆ°è¿›é˜¶ä¿¡å·æ—¶ï¼š
- è¿ç»­ 7+ å¤©å®Œæˆ
- å¤šæ¬¡é€‰æ‹©"è¶…é¢å®Œæˆ"
- å¤šæ¬¡å›ç­”"æƒ³åšæ›´å¤š"+"è§‰å¾—è½»æ¾"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš€ å‡†å¤‡å¥½è¿›é˜¶äº†ï¼                        â”‚
â”‚                                          â”‚
â”‚  ä½ å·²ç»è¿ç»­ 14 å¤©å®Œæˆ"åš2ä¸ªä¿¯å§æ’‘"ï¼Œ     â”‚
â”‚  è€Œä¸”ç»å¸¸è¶…é¢å®Œæˆï¼Œçœ‹èµ·æ¥å¾ˆè½»æ¾ï¼         â”‚
â”‚                                          â”‚
â”‚  æ˜¯å¦å‡çº§åˆ°ä¸‹ä¸€é˜¶æ®µï¼Ÿ                     â”‚
â”‚                                          â”‚
â”‚  å½“å‰ï¼šåš2ä¸ªä¿¯å§æ’‘                        â”‚
â”‚     â†“                                    â”‚
â”‚  ä¸‹ä¸€é˜¶æ®µï¼šåš5ä¸ªä¿¯å§æ’‘                    â”‚
â”‚                                          â”‚
â”‚  æç¤ºï¼šè¿›é˜¶åï¼Œ"åš2ä¸ª"ä»æ˜¯æœ€ä½æ ‡å‡†        â”‚
â”‚                                          â”‚
â”‚  [æš‚ä¸å‡çº§]              [å‡çº§ ğŸš€]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 ä¹ æƒ¯ç¹æ®–æç¤º

```
å½“ä¹ æƒ¯ç¨³å®šåï¼ˆè¿ç»­ 30+ å¤©ï¼‰ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ± ä½ çš„è¿åŠ¨ä¹ æƒ¯å·²ç»å¾ˆç¨³å®šäº†ï¼            â”‚
â”‚                                          â”‚
â”‚  æ˜¯å¦æƒ³è¦åŸ¹å…»ç›¸å…³çš„æ–°ä¹ æƒ¯ï¼Ÿ               â”‚
â”‚                                          â”‚
â”‚  åŸºäºä½ çš„"æ¯å¤©è¿åŠ¨"ä¹ æƒ¯ï¼Œæ¨èï¼š           â”‚
â”‚                                          â”‚
â”‚  â—‹ ç”Ÿé•¿å‹ï¼šå¢åŠ è¿åŠ¨æ—¶é•¿                   â”‚
â”‚    "åš10ä¸ªä¿¯å§æ’‘" â†’ "è¿åŠ¨5åˆ†é’Ÿ"          â”‚
â”‚                                          â”‚
â”‚  â—‹ ç¹æ®–å‹ï¼šåŸ¹å…»ç›¸å…³ä¹ æƒ¯                   â”‚
â”‚    â€¢ è¿åŠ¨åå–ä¸€æ¯æ°´                      â”‚
â”‚    â€¢ è¿åŠ¨å‰åšæ‹‰ä¼¸                        â”‚
â”‚                                          â”‚
â”‚  [ä»¥åå†è¯´]          [åˆ›å»ºæ–°ä¹ æƒ¯]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.6 æ„¿æœ›è¿½è¸ª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /aspirations/[id] - æ„¿æœ›è¯¦æƒ…            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  å˜å¾—æ›´å¥åº·                      è¿›è¡Œä¸­   â”‚
â”‚                                          â”‚
â”‚  å®Œæˆåº¦ï¼š60%                             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                   â”‚
â”‚                                          â”‚
â”‚  å…³è”ä¹ æƒ¯ï¼š                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… æ¯å¤©è¿åŠ¨     å·²æ¯•ä¸š (è‡ªåŠ¨åŒ–)      â”‚ â”‚
â”‚  â”‚ ğŸ”¥ å¤šå–æ°´       è¿›è¡Œä¸­ (21å¤©)        â”‚ â”‚
â”‚  â”‚ ğŸ“ å¥åº·é¥®é£Ÿ     è¿›è¡Œä¸­ (7å¤©)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  [+ æ·»åŠ æ–°ä¹ æƒ¯]                          â”‚
â”‚                                          â”‚
â”‚  å½“æ‰€æœ‰ä¹ æƒ¯éƒ½ç¨³å®šåï¼Œè¿™ä¸ªæ„¿æœ›å°±å®ç°äº†ï¼   â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€API è·¯ç”±è®¾è®¡

### 6.1 tRPC è·¯ç”±ç»“æ„

```typescript
// src/server/api/root.ts
export const appRouter = createTRPCRouter({
  aspiration: aspirationRouter,
  habit: habitRouter,
  log: logRouter,
  celebration: celebrationRouter,
  routine: routineRouter,
});
```

### 6.2 aspiration è·¯ç”±

```typescript
// src/server/api/routers/aspiration.ts
export const aspirationRouter = createTRPCRouter({
  // æŸ¥è¯¢
  list: protectedProcedure.query(),           // è·å–æ„¿æœ›åˆ—è¡¨
  getById: protectedProcedure.input(...).query(),  // è·å–æ„¿æœ›è¯¦æƒ…

  // å˜æ›´
  create: protectedProcedure.input(...).mutation(),   // åˆ›å»ºæ„¿æœ›
  update: protectedProcedure.input(...).mutation(),   // æ›´æ–°æ„¿æœ›
  delete: protectedProcedure.input(...).mutation(),   // åˆ é™¤æ„¿æœ›

  // AI åŠŸèƒ½
  explore: protectedProcedure.input(...).mutation(),  // æ¢ç´¢è¡Œä¸ºé›†ç¾¤
  generateFocusMap: protectedProcedure.input(...).mutation(), // ç”Ÿæˆç„¦ç‚¹åœ°å›¾

  // çŠ¶æ€
  markAchieved: protectedProcedure.input(...).mutation(), // æ ‡è®°è¾¾æˆ
  updateProgress: protectedProcedure.input(...).mutation(), // æ›´æ–°è¿›åº¦
});
```

### 6.3 habit è·¯ç”±

```typescript
// src/server/api/routers/habit.ts
export const habitRouter = createTRPCRouter({
  // æŸ¥è¯¢
  list: protectedProcedure.query(),           // è·å–ä¹ æƒ¯åˆ—è¡¨
  getById: protectedProcedure.input(...).query(),  // è·å–ä¹ æƒ¯è¯¦æƒ…
  getToday: protectedProcedure.query(),       // è·å–ä»Šæ—¥å¾…å®Œæˆ

  // å˜æ›´
  create: protectedProcedure.input(...).mutation(),   // åˆ›å»ºä¹ æƒ¯
  update: protectedProcedure.input(...).mutation(),   // æ›´æ–°ä¹ æƒ¯
  delete: protectedProcedure.input(...).mutation(),   // åˆ é™¤ä¹ æƒ¯

  // é˜¶æ®µ
  checkAdvance: protectedProcedure.input(...).query(),  // æ£€æŸ¥æ˜¯å¦å¯è¿›é˜¶
  advance: protectedProcedure.input(...).mutation(),    // æ‰§è¡Œè¿›é˜¶
  retreat: protectedProcedure.input(...).mutation(),    // æ‰§è¡Œé€€é˜¶

  // ç¹æ®–
  checkProliferation: protectedProcedure.input(...).query(), // æ£€æŸ¥æ˜¯å¦å¯ç¹æ®–
  proliferate: protectedProcedure.input(...).mutation(),     // åˆ›å»ºç¹æ®–ä¹ æƒ¯

  // æ¼”ç»ƒ
  recordRehearsal: protectedProcedure.input(...).mutation(), // è®°å½•æ¼”ç»ƒ

  // AI åŠŸèƒ½
  designPhases: protectedProcedure.input(...).mutation(),    // AIè®¾è®¡é˜¶æ®µ
  suggestProliferation: protectedProcedure.input(...).query(), // AIç¹æ®–å»ºè®®
});
```

### 6.4 log è·¯ç”±

```typescript
// src/server/api/routers/log.ts
export const logRouter = createTRPCRouter({
  // æŸ¥è¯¢
  getByHabit: protectedProcedure.input(...).query(),   // è·å–ä¹ æƒ¯æ‰“å¡è®°å½•
  getByDate: protectedProcedure.input(...).query(),    // æŒ‰æ—¥æœŸæŸ¥è¯¢
  getStats: protectedProcedure.input(...).query(),     // è·å–ç»Ÿè®¡

  // å˜æ›´
  checkin: protectedProcedure.input(...).mutation(),   // æ‰“å¡
  update: protectedProcedure.input(...).mutation(),    // æ›´æ–°æ‰“å¡
  delete: protectedProcedure.input(...).mutation(),    // åˆ é™¤æ‰“å¡
});
```

---

## ä¸ƒã€å˜æ›´å¯¹ç…§

### 7.1 åˆ é™¤çš„æ¨¡å‹

| æ¨¡å‹ | åˆ é™¤åŸå›  |
|------|---------|
| `BehaviorCluster` | åˆå¹¶åˆ° `Aspiration.explorationData` |
| `PhaseHistory` | ç®€åŒ–ï¼Œä¸éœ€è¦ç‹¬ç«‹å†å² |
| `Badge`, `UserBadge` | æš‚æ—¶ç§»é™¤ï¼Œåç»­è¿­ä»£ |
| `Report`, `Milestone` | æš‚æ—¶ç§»é™¤ï¼Œåç»­è¿­ä»£ |
| `AnalyticsSnapshot` | æš‚æ—¶ç§»é™¤ï¼Œåç»­è¿­ä»£ |
| `FlashCelebration` | ç®€åŒ–ï¼Œåˆå¹¶åˆ° `HabitLog` |
| `ProliferationPromptResponse` | ç®€åŒ–ï¼Œä¸éœ€è¦ç‹¬ç«‹è®°å½• |

### 7.2 ç®€åŒ–çš„å­—æ®µ

| åŸå­—æ®µ | æ–°å­—æ®µ | è¯´æ˜ |
|--------|--------|------|
| `Habit.motivation` (å¤æ‚JSON) | ç§»é™¤ | ä¸éœ€è¦å­˜å‚¨ |
| `Habit.ability` (å¤æ‚JSON) | ç§»é™¤ | ä¸éœ€è¦å­˜å‚¨ |
| `Habit.prompt` (å¤æ‚JSON) | `anchor` | ç®€åŒ–ä¸ºé”šç‚¹å­—ç¬¦ä¸² |
| `Habit.recipeAnchor/recipeBehavior/recipeCelebration` | `anchor/behavior/celebration` | ç®€åŒ–å‘½å |

### 7.3 æ–°å¢çš„å­—æ®µ

| æ¨¡å‹ | æ–°å­—æ®µ | è¯´æ˜ |
|------|--------|------|
| `Aspiration` | `status` | çŠ¶æ€è¿½è¸ª |
| `Aspiration` | `progress` | å®Œæˆåº¦ |
| `Aspiration` | `explorationData` | è¡Œä¸ºæ¢ç´¢æ•°æ® |
| `Habit` | `parentHabitId` | ç¹æ®–å…³ç³» |
| `Habit` | `graduatedAt` | æ¯•ä¸šæ—¶é—´ |
| `Habit` | `currentStreak/longestStreak/totalCheckins` | ç»Ÿè®¡ç¼“å­˜ |

---

## å…«ã€å®æ–½è®¡åˆ’

### Phase 1: æ•°æ®åº“è¿ç§»ï¼ˆ2hï¼‰

1. å¤‡ä»½ç°æœ‰æ•°æ®ï¼ˆå¦‚æœ‰ï¼‰
2. é‡å†™ `prisma/schema.prisma`
3. æ‰§è¡Œ `pnpm db:push`
4. åˆå§‹åŒ–åº†ç¥æ–¹å¼æ•°æ®

### Phase 2: åç«¯é‡æ„ï¼ˆ8hï¼‰

1. é‡å†™ `aspiration.ts` è·¯ç”±
2. é‡å†™ `habit.ts` è·¯ç”±
3. é‡å†™ `log.ts` è·¯ç”±
4. æ›´æ–° AI æ¨¡å—é€‚é…æ–°ç»“æ„
5. åˆ é™¤åºŸå¼ƒçš„è·¯ç”±æ–‡ä»¶

### Phase 3: å‰ç«¯é‡æ„ï¼ˆ12hï¼‰

1. åˆ›å»ºä¹ æƒ¯å‘å¯¼ç»„ä»¶
2. é‡å†™æ„¿æœ›é¡µé¢
3. é‡å†™ä¹ æƒ¯è¯¦æƒ…é¡µ
4. æ›´æ–°ä»ªè¡¨ç›˜
5. å®ç°åº†ç¥å¼¹çª—
6. å®ç°è¿›é˜¶/ç¹æ®–æç¤º

### Phase 4: æµ‹è¯•éªŒè¯ï¼ˆ2hï¼‰

1. ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
2. è¾¹ç•Œæƒ…å†µæµ‹è¯•
3. æ€§èƒ½æµ‹è¯•

**é¢„è®¡æ€»å·¥æ—¶ï¼š24h**

---

## ä¹ã€åç»­è¿­ä»£

### v3.1 - æ•°æ®åˆ†æ

- æ‰“å¡çƒ­åŠ›å›¾
- è¶‹åŠ¿åˆ†æ
- æ´å¯Ÿç”Ÿæˆ

### v3.2 - æˆå°±ç³»ç»Ÿ

- å¾½ç« å®šä¹‰
- è§£é”é€»è¾‘
- æˆå°±å±•ç¤º

### v3.3 - æŠ¥å‘Šç³»ç»Ÿ

- å‘¨æŠ¥ç”Ÿæˆ
- æœˆæŠ¥ç”Ÿæˆ
- é‡Œç¨‹ç¢‘æŠ¥å‘Š

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**ç”Ÿæˆå·¥å…·**: Claude Code
**ä¸‹ä¸€æ­¥**: æ‰§è¡Œ Phase 1 æ•°æ®åº“è¿ç§»
